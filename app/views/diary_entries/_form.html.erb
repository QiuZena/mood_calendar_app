<% if diary_entry.errors.any? %>
  <div class="error-messages" style="color: red;">
    <h4><%= pluralize(diary_entry.errors.count, "error") %> prevented this entry from being saved:</h4>
    <ul>
      <% diary_entry.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>


<%= form_with(model: diary_entry, local: true, html: { multipart: true }) do |form| %>


  <%= form.hidden_field :entry_date, value: Date.today %>

  <% if current_user %>
    <%= form.hidden_field :user_id, value: current_user.id %>
  <% end %>

  <h2 style="text-align: center; margin-bottom: 20px; color: #7a5c39;">How do you feel today?</h2>
  <div class="mood-cards" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-bottom: 20px;">
    <% moods.each do |mood| %>
      <label class="mood-card" style="
        display: flex;
        flex-direction: column;
        align-items: center;
        border: 1px solid #ddd;
        border-radius: 10px;
        padding: 10px;
        cursor: pointer;
        background-color: #fff;
        transition: box-shadow 0.3s;">

        <%= form.radio_button :mood_id, mood.id, id: "mood_\#{mood.id}", style: "margin-bottom: 8px;" %>
        <%= image_tag asset_path(mood.icon), size: "40x40", alt: mood.name %>
        <span style="text-align: center; color: #5c7c9a; margin-top: 5px;"><%= mood.name %></span>
      </label>
    <% end %>
  </div>
  
  <div>
    <%= form.label :content, "Write something (optional)" %><br>
    <%= form.text_area :content %>
  </div>

  <div>
    <%= form.label :image, "Upload Image (optional)" %><br>
    <%= form.file_field :image %>
  </div>


  <div>
    <%= form.submit "Create Diary Entry" %>
  </div>

<% end %>



